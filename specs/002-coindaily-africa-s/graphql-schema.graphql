# GraphQL Schema Contract
# CoinDaily Platform API

## Core Types

type User {
  id: ID!
  email: String!
  username: String!
  firstName: String
  lastName: String
  avatarUrl: String
  bio: String
  location: String
  preferredLanguage: String!
  subscriptionTier: SubscriptionTier!
  emailVerified: Boolean!
  phoneVerified: Boolean!
  twoFactorEnabled: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
  lastLoginAt: DateTime
  status: UserStatus!
  profile: UserProfile
  articles: [Article!]!
  communityPosts: [CommunityPost!]!
  subscription: Subscription
}

enum SubscriptionTier {
  FREE
  PREMIUM
  ENTERPRISE
}

enum UserStatus {
  ACTIVE
  SUSPENDED
  BANNED
  PENDING_VERIFICATION
}

type UserProfile {
  userId: ID!
  tradingExperience: String
  investmentPortfolioSize: String
  preferredExchanges: [String!]!
  notificationPreferences: NotificationSettings!
  privacySettings: PrivacySettings!
  contentPreferences: ContentPreferences!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type NotificationSettings {
  emailNotifications: Boolean!
  pushNotifications: Boolean!
  smsNotifications: Boolean!
  breakingNewsAlerts: Boolean!
  priceAlerts: Boolean!
  communityMentions: Boolean!
}

type PrivacySettings {
  profileVisibility: ProfileVisibility!
  showInvestmentData: Boolean!
  showTradingActivity: Boolean!
  allowMessageRequests: Boolean!
}

enum ProfileVisibility {
  PUBLIC
  PRIVATE
  FRIENDS
}

type ContentPreferences {
  categories: [String!]!
  languages: [String!]!
  contentDifficulty: ContentDifficulty!
  autoTranslate: Boolean!
}

enum ContentDifficulty {
  BEGINNER
  INTERMEDIATE
  ADVANCED
}

## Content Types

type Article {
  id: ID!
  title: String!
  slug: String!
  excerpt: String!
  content: String!
  featuredImageUrl: String
  author: User!
  category: Category!
  tags: [Tag!]!
  status: ArticleStatus!
  priority: ArticlePriority!
  isPremium: Boolean!
  viewCount: Int!
  likeCount: Int!
  commentCount: Int!
  shareCount: Int!
  readingTimeMinutes: Int!
  seoTitle: String
  seoDescription: String
  publishScheduledAt: DateTime
  publishedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  translations: [ArticleTranslation!]!
}

enum ArticleStatus {
  DRAFT
  PENDING_REVIEW
  APPROVED
  PUBLISHED
  ARCHIVED
  REJECTED
}

enum ArticlePriority {
  LOW
  NORMAL
  HIGH
  BREAKING
}

type ArticleTranslation {
  id: ID!
  articleId: ID!
  languageCode: String!
  title: String!
  excerpt: String!
  content: String!
  translationStatus: TranslationStatus!
  aiGenerated: Boolean!
  humanReviewed: Boolean!
  translatorId: ID
  qualityScore: Int
  createdAt: DateTime!
  updatedAt: DateTime!
}

enum TranslationStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  REVIEWED
  REJECTED
}

type Category {
  id: ID!
  name: String!
  slug: String!
  description: String
  parentId: ID
  iconUrl: String
  colorHex: String
  sortOrder: Int!
  isActive: Boolean!
  articleCount: Int!
  createdAt: DateTime!
  updatedAt: DateTime!
  articles: [Article!]!
  subcategories: [Category!]!
}

type Tag {
  id: ID!
  name: String!
  slug: String!
  description: String
  usageCount: Int!
  trendingScore: Float!
  createdAt: DateTime!
  updatedAt: DateTime!
  articles: [Article!]!
}

## Cryptocurrency Types

type Token {
  id: ID!
  symbol: String!
  name: String!
  slug: String!
  description: String
  logoUrl: String
  websiteUrl: String
  whitepaperUrl: String
  blockchain: String!
  contractAddress: String
  tokenType: TokenType!
  marketCap: Float
  circulatingSupply: Float
  totalSupply: Float
  maxSupply: Float
  isMemecoin: Boolean!
  isListed: Boolean!
  listingStatus: ListingStatus!
  createdAt: DateTime!
  updatedAt: DateTime!
  marketData: [MarketData!]!
}

enum TokenType {
  CRYPTOCURRENCY
  MEMECOIN
  UTILITY_TOKEN
  SECURITY_TOKEN
  STABLECOIN
}

enum ListingStatus {
  APPROVED
  PENDING_REVIEW
  REJECTED
  DELISTED
}

type MarketData {
  id: ID!
  token: Token!
  exchange: String!
  priceUsd: Float!
  priceChange24h: Float!
  volume24h: Float!
  marketCap: Float!
  timestamp: DateTime!
  high24h: Float!
  low24h: Float!
  tradingPairs: [String!]!
}

type ExchangeIntegration {
  id: ID!
  name: String!
  slug: String!
  apiEndpoint: String!
  websocketEndpoint: String
  region: String!
  supportedCountries: [String!]!
  isActive: Boolean!
  rateLimitPerMinute: Int!
  lastSyncAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
}

## Community Types

type CommunityPost {
  id: ID!
  author: User!
  title: String
  content: String!
  postType: PostType!
  parentId: ID
  tokenMentions: [String!]!
  mediaUrls: [String!]!
  upvoteCount: Int!
  downvoteCount: Int!
  commentCount: Int!
  shareCount: Int!
  isPinned: Boolean!
  isLocked: Boolean!
  moderationStatus: ModerationStatus!
  violationReason: String
  penaltyApplied: PenaltyType
  createdAt: DateTime!
  updatedAt: DateTime!
  replies: [CommunityPost!]!
  userVote: Vote
}

enum PostType {
  TEXT
  LINK
  IMAGE
  VIDEO
  POLL
}

enum ModerationStatus {
  APPROVED
  PENDING
  FLAGGED
  SHADOW_BANNED
  REMOVED
}

enum PenaltyType {
  WARNING
  SHADOW_BAN
  TEMPORARY_BAN
  PERMANENT_BAN
}

type Vote {
  id: ID!
  user: User!
  post: CommunityPost!
  voteType: VoteType!
  createdAt: DateTime!
}

enum VoteType {
  UPVOTE
  DOWNVOTE
}

## AI System Types

type AIAgent {
  id: ID!
  name: String!
  type: AgentType!
  modelProvider: String!
  modelName: String!
  configuration: JSON!
  isActive: Boolean!
  performanceMetrics: AgentMetrics!
  createdAt: DateTime!
  updatedAt: DateTime!
  tasks: [AITask!]!
}

enum AgentType {
  CONTENT_GENERATION
  MARKET_ANALYSIS
  SENTIMENT_ANALYSIS
  TRANSLATION
  IMAGE_GENERATION
  MODERATION
  QUALITY_REVIEW
}

type AgentMetrics {
  totalRequests: Int!
  successfulRequests: Int!
  averageResponseTimeMs: Float!
  qualityScore: Float!
  costPerRequest: Float!
  lastPerformanceCheck: DateTime!
}

type AITask {
  id: ID!
  agent: AIAgent!
  taskType: String!
  inputData: JSON!
  outputData: JSON
  status: TaskStatus!
  priority: TaskPriority!
  estimatedCost: Float!
  actualCost: Float
  processingTimeMs: Int
  qualityScore: Float
  errorMessage: String
  retryCount: Int!
  maxRetries: Int!
  scheduledAt: DateTime
  startedAt: DateTime
  completedAt: DateTime
  createdAt: DateTime!
}

enum TaskStatus {
  QUEUED
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

enum TaskPriority {
  LOW
  NORMAL
  HIGH
  URGENT
}

## Analytics Types

type UserEngagement {
  id: ID!
  user: User!
  article: Article
  post: CommunityPost
  actionType: EngagementAction!
  durationSeconds: Int
  scrollPercentage: Float
  deviceType: String!
  userAgent: String!
  ipAddress: String!
  referrerUrl: String
  createdAt: DateTime!
}

enum EngagementAction {
  VIEW
  LIKE
  SHARE
  COMMENT
  BOOKMARK
  SUBSCRIBE
  DOWNLOAD
}

type ContentPerformance {
  id: ID!
  contentId: ID!
  contentType: ContentType!
  date: Date!
  views: Int!
  uniqueViews: Int!
  likes: Int!
  shares: Int!
  comments: Int!
  readingTimeAvg: Float!
  bounceRate: Float!
  conversionRate: Float!
  revenueGenerated: Float!
}

enum ContentType {
  ARTICLE
  POST
}

## Subscription Types

type Subscription {
  id: ID!
  user: User!
  plan: SubscriptionPlan!
  status: SubscriptionStatus!
  currentPeriodStart: DateTime!
  currentPeriodEnd: DateTime!
  trialEnd: DateTime
  cancelAtPeriodEnd: Boolean!
  cancelledAt: DateTime
  stripeSubscriptionId: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

enum SubscriptionStatus {
  ACTIVE
  CANCELLED
  PAST_DUE
  INCOMPLETE
  TRIALING
}

type SubscriptionPlan {
  id: ID!
  name: String!
  description: String!
  priceCents: Int!
  currency: String!
  billingInterval: BillingInterval!
  trialPeriodDays: Int!
  features: [String!]!
  isActive: Boolean!
  sortOrder: Int!
  stripePriceId: String
  createdAt: DateTime!
  updatedAt: DateTime!
}

enum BillingInterval {
  MONTH
  YEAR
}

## Search Types

type SearchResult {
  id: ID!
  title: String!
  excerpt: String!
  url: String!
  type: SearchResultType!
  relevanceScore: Float!
  isAiGenerated: Boolean!
  isPremium: Boolean!
  publishedAt: DateTime
}

enum SearchResultType {
  ARTICLE
  TOKEN
  USER
  COMMUNITY_POST
}

type SearchSuggestion {
  query: String!
  type: SuggestionType!
  count: Int!
}

enum SuggestionType {
  RECENT
  TRENDING
  POPULAR
  AUTOCOMPLETE
}

## Input Types

input CreateArticleInput {
  title: String!
  excerpt: String!
  content: String!
  categoryId: ID!
  tags: [String!]!
  isPremium: Boolean!
  featuredImageUrl: String
  publishScheduledAt: DateTime
}

input UpdateArticleInput {
  title: String
  excerpt: String
  content: String
  categoryId: ID
  tags: [String!]
  isPremium: Boolean
  featuredImageUrl: String
  publishScheduledAt: DateTime
}

input CreateCommunityPostInput {
  title: String
  content: String!
  postType: PostType!
  parentId: ID
  mediaUrls: [String!]
}

input UpdateUserProfileInput {
  firstName: String
  lastName: String
  bio: String
  location: String
  preferredLanguage: String
  notificationPreferences: NotificationSettingsInput
  privacySettings: PrivacySettingsInput
  contentPreferences: ContentPreferencesInput
}

input NotificationSettingsInput {
  emailNotifications: Boolean
  pushNotifications: Boolean
  smsNotifications: Boolean
  breakingNewsAlerts: Boolean
  priceAlerts: Boolean
  communityMentions: Boolean
}

input PrivacySettingsInput {
  profileVisibility: ProfileVisibility
  showInvestmentData: Boolean
  showTradingActivity: Boolean
  allowMessageRequests: Boolean
}

input ContentPreferencesInput {
  categories: [String!]
  languages: [String!]
  contentDifficulty: ContentDifficulty
  autoTranslate: Boolean
}

input SearchInput {
  query: String!
  type: SearchType
  filters: SearchFiltersInput
  limit: Int
  offset: Int
}

enum SearchType {
  AI_POWERED
  ORGANIC
}

input SearchFiltersInput {
  categories: [String!]
  tags: [String!]
  isPremium: Boolean
  dateRange: DateRangeInput
  contentType: [SearchResultType!]
}

input DateRangeInput {
  start: DateTime
  end: DateTime
}

## Custom Scalar Types

scalar DateTime
scalar Date
scalar JSON

## Root Query Type

type Query {
  # User queries
  me: User
  user(id: ID!): User
  users(
    limit: Int = 20
    offset: Int = 0
    filter: String
  ): [User!]!

  # Article queries
  article(id: ID, slug: String): Article
  articles(
    limit: Int = 20
    offset: Int = 0
    categoryId: ID
    tags: [String!]
    status: ArticleStatus
    isPremium: Boolean
    authorId: ID
  ): [Article!]!
  
  featuredArticles(limit: Int = 10): [Article!]!
  trendingArticles(limit: Int = 10): [Article!]!
  
  # Category queries
  categories(parentId: ID): [Category!]!
  category(id: ID, slug: String): Category
  
  # Tag queries
  tags(limit: Int = 50): [Tag!]!
  trendingTags(limit: Int = 20): [Tag!]!
  
  # Token queries
  token(id: ID, symbol: String, slug: String): Token
  tokens(
    limit: Int = 100
    offset: Int = 0
    isListed: Boolean
    tokenType: TokenType
  ): [Token!]!
  
  trendingTokens(limit: Int = 20): [Token!]!
  memecoins(limit: Int = 50): [Token!]!
  
  # Market data queries
  marketData(
    tokenId: ID!
    exchange: String
    limit: Int = 100
  ): [MarketData!]!
  
  # Community queries
  communityPost(id: ID!): CommunityPost
  communityPosts(
    limit: Int = 20
    offset: Int = 0
    authorId: ID
    parentId: ID
    moderationStatus: ModerationStatus
  ): [CommunityPost!]!
  
  # AI system queries
  aiAgents: [AIAgent!]!
  aiAgent(id: ID!): AIAgent
  aiTasks(
    agentId: ID
    status: TaskStatus
    limit: Int = 50
  ): [AITask!]!
  
  # Analytics queries
  contentPerformance(
    contentId: ID!
    dateRange: DateRangeInput
  ): [ContentPerformance!]!
  
  # Search queries
  search(input: SearchInput!): [SearchResult!]!
  searchSuggestions(query: String!): [SearchSuggestion!]!
  
  # Subscription queries
  subscriptionPlans: [SubscriptionPlan!]!
}

## Root Mutation Type

type Mutation {
  # Authentication
  login(email: String!, password: String!): AuthPayload!
  register(
    email: String!
    username: String!
    password: String!
    firstName: String
    lastName: String
  ): AuthPayload!
  logout: Boolean!
  refreshToken: AuthPayload!
  
  # User management
  updateProfile(input: UpdateUserProfileInput!): User!
  uploadAvatar(file: Upload!): User!
  
  # Article management
  createArticle(input: CreateArticleInput!): Article!
  updateArticle(id: ID!, input: UpdateArticleInput!): Article!
  deleteArticle(id: ID!): Boolean!
  publishArticle(id: ID!): Article!
  
  # Community management
  createPost(input: CreateCommunityPostInput!): CommunityPost!
  updatePost(id: ID!, content: String!): CommunityPost!
  deletePost(id: ID!): Boolean!
  votePost(postId: ID!, voteType: VoteType!): Vote!
  
  # Content interaction
  likeArticle(articleId: ID!): Article!
  bookmarkArticle(articleId: ID!): Boolean!
  shareContent(contentId: ID!, contentType: ContentType!): Boolean!
  
  # AI system
  triggerAITask(
    agentId: ID!
    taskType: String!
    inputData: JSON!
  ): AITask!
  
  # Subscription management
  subscribe(planId: ID!): Subscription!
  cancelSubscription: Subscription!
  updatePaymentMethod(paymentMethodId: String!): Boolean!
}

## Root Subscription Type

type Subscription {
  # Real-time market data
  marketDataUpdated(tokenIds: [ID!]): MarketData!
  
  # Breaking news
  breakingNewsPublished: Article!
  
  # Community updates
  newCommunityPost(categoryIds: [ID!]): CommunityPost!
  postVoted(postId: ID!): CommunityPost!
  
  # User notifications
  userNotification(userId: ID!): Notification!
}

type Notification {
  id: ID!
  userId: ID!
  type: NotificationType!
  title: String!
  message: String!
  data: JSON
  read: Boolean!
  createdAt: DateTime!
}

enum NotificationType {
  BREAKING_NEWS
  PRICE_ALERT
  COMMUNITY_MENTION
  ARTICLE_PUBLISHED
  SUBSCRIPTION_REMINDER
}

type AuthPayload {
  token: String!
  refreshToken: String!
  user: User!
  expiresAt: DateTime!
}

scalar Upload